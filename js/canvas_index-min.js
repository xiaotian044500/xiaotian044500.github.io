require.config({baseUrl:location.protocol+"//"+location.host+"/js/",paths:{func:"ext_func-min"}});require(["func"],function(a){var b=(function(c){var d={_host:location.protocol+"//"+location.host,_cache:{languages:{runtimeContent:["blog-index"],canvasSetting:{el:"#banner",bgcolor:"#222222",bgcolorOpacity:0.6,color:"#ffffff",concentration:0.2,radius:5,opacity:0.9,duration:10,rangeRadius:512},canvasText:{content:["时间在我们每个人身上所沉淀的都是我们自己选择的","XT044500","知其雄,守其雌,为天下溪.为天下溪,常德不离,复归于婴儿.知其白,守其黑,为天下式.为天下式,常德不忒,复归于无极.知其荣,守其辱,为天下谷.为天下谷,常德乃足,复归于朴.朴散则为器,圣人用之,则为官长,姑大制不割. - 道德经 老子","Everything that you've learnt and all the hardships you've suffered will all come in handy at some point in your life. - Francis Scott Fitzgerald"]}}},_ele:{},_data:{},_request:["/api/ext/no.php"],load_document:function(){this._ele.ub=document.getElementById("utility-bar");this._ele.m=document.getElementById("main");this._ele.artc=this._ele.m.getElementsByTagName("ARTICLE");this._ele.st=document.getElementById("j-show-text");for(var e in this._ele){if(!this._ele[e]){return null}}if(window.console){console.log("INF: element ready["+this._cache.languages.runtimeContent[0]+"].")}return this},load_event:function(){d._data={article:{cur:[],floatBarHeight:0,movement:{src:[],res:0}}};var o=d._cache.languages.canvasSetting;var k=d._cache.languages.canvasText;var h=new granule(o)||{};if(!h){return}h.startAnimation();var e=~~(Math.random()*1000)%256;var i=3000;var m=function(){if(h){if(e%2){h.closeAniStauts();i=240000;clearInterval(l);l=setInterval(m,i)}else{h.echo(String.fromCharCode(e/2));i=10000;clearInterval(l);if(0===e%256){l=setInterval(n,i)}else{l=setInterval(m,i)}}console.log(e);e=(1+e)%256}else{console.log("generate granule failure");clearInterval(l)}};var n=function(){if(h||!k||!k.content||!k.content.length){if(!k.hasOwnProperty("content_ctrl")){k.content_ctrl={cur_str:~~(Math.random()*10)%k.content.length,cur_char:0}}if(e%2){h.closeAniStauts();i=240000;clearInterval(l);l=setInterval(n,i)}else{h.echo(k.content[k.content_ctrl.cur_str][k.content_ctrl.cur_char]);i=10000;clearInterval(l);l=setInterval(n,i);k.content_ctrl.cur_char+=1;if(k.content_ctrl.cur_char==k.content[k.content_ctrl.cur_str].length){k.content_ctrl.cur_str+=1;if(k.content_ctrl.cur_str===k.content.length){clearInterval(l);l=setInterval(m,i)}k.content_ctrl.cur_str=k.content_ctrl.cur_str%k.content.length;k.content_ctrl.cur_char=0}}console.log(e);e=(1+e)%256}else{console.log("generate granule failure");clearInterval(l)}};if(k.content.length){var l=setInterval(n,i)}else{var l=setInterval(m,i)}var g=function(q){tmp=[],tmpp=0;for(var p=q.length-1;p>0;p--){tmp.push(q[p]-q[p-1])}for(j in tmp){tmpp+=(tmp[j]>0)?1:((tmp[j]<0)?-1:0)}tmpp=(tmpp>0)?1:((tmpp<0)?-1:0);switch(tmpp){case 1:break;case 0:break;case -1:break;default:console.log("NAN");break}return tmpp};var f=d._ele.ub;window.onscroll=function(){var r=d._ele.artc,p=0;if(h&&(h.canvas.getBoundingClientRect().top+h.canvas.height)>(d._data.article.floatBarHeight+10)){if(!l){l=setInterval(n,i)}}else{l=l?clearInterval(l):l}if("/"!=location.pathname){return}if(d._data.article.movement.src.slice(-1)!=h.canvas.getBoundingClientRect().top){if(d._data.article.movement.src.length<3){d._data.article.movement.src.push(h.canvas.getBoundingClientRect().top)}else{d._data.article.movement.src.push(h.canvas.getBoundingClientRect().top);d._data.article.movement.src.shift()}p=g(d._data.article.movement.src)}if(!d._data.article.cur.length){tmp=0;for(var q=r.length-1;q>=0;q--){if(r[q].getBoundingClientRect().top>=0){tmp=q;continue}else{break}}d._data.article.cur[0]=tmp?tmp:0;d._ele.st.innerText=d._ele.artc[d._data.article.cur[0]].querySelector(".article-title").innerText}else{if(d._ele.artc[d._data.article.cur[0]].getBoundingClientRect().top>=0){tmp=0;for(var q=d._data.article.cur[0];q>=0;q--){if(r[q].getBoundingClientRect().bottom>=d._data.article.floatBarHeight){tmp=q;continue}else{break}}d._data.article.cur[0]=tmp;d._ele.st.innerText=d._ele.artc[d._data.article.cur[0]].querySelector(".article-title").innerText}else{tmp=d._ele.artc.length-1;for(var q=d._data.article.cur[0];q<d._ele.artc.length;q++){if(r[q].getBoundingClientRect().top<d._data.article.floatBarHeight){tmp=q;continue}else{break}}d._data.article.cur[0]=tmp;d._ele.st.innerText=d._ele.artc[d._data.article.cur[0]].querySelector(".article-title").innerText}}if(h&&(h.canvas.getBoundingClientRect().top+h.canvas.height)>(d._data.article.floatBarHeight+10)){$("#utility-bar").fadeOut()}else{$("#utility-bar").fadeIn();a.addClass(f,"is_stuck");if(!d._data.article.floatBarHeight&&d._ele.ub.getBoundingClientRect().height){d._data.article.floatBarHeight=d._ele.ub.getBoundingClientRect().height}}};window.onfocus=function(){if(!l){l=setInterval(n,i)}};window.onblur=function(){l=l?clearInterval(l):l};if(window.console){console.log("INF: event ready["+this._cache.languages.runtimeContent[0]+"].")}return this},utils:{},start:function(){if(this.load_document()&&this.load_event()){}}};return d})("force");b.start();window.Op=b});